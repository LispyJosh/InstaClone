{% extends 'base.html' %}

{% block content %}
<h1>Your Conversations</h1>

<!-- Link to New Message Page -->
<a href="{% url 'new_message' %}" class="btn btn-primary mb-3">Start a New Conversation</a>

<!-- List of Conversations -->
<ul class="list-group">
    {% for conversation in conversations %}
        <li class="list-group-item">
            <a href="{% url 'conversation' conversation.other_user.username %}">
                {{ conversation.other_user.username }}: {{ conversation.message.content|truncatechars:50 }}
            </a>
            <small class="text-muted float-end">{{ conversation.message.timestamp }}</small>
        </li>
    {% empty %}
        <li class="list-group-item">You have no conversations yet. 
            <a href="{% url 'new_message' %}">Start one now!</a>
        </li>
    {% endfor %}
</ul>
{% endblock %}
